<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>í™”ì„±ì‹œ í˜„í™©ì¹´ë“œ ê²€ìƒ‰</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/instantsearch.css@8/themes/satellite-min.css">
    <script src="https://cdn.jsdelivr.net/npm/algoliasearch@4/dist/algoliasearch-lite.umd.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/instantsearch.js@4"></script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        h1 {
            color: #333;
            text-align: center;
        }
        .ais-SearchBox {
            margin-bottom: 30px;
        }
        .ais-SearchBox-input {
            padding: 12px;
            font-size: 16px;
        }
        .ais-Hits-item {
            background: white;
            padding: 20px;
            margin-bottom: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .card-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            padding-bottom: 10px;
            border-bottom: 2px solid #eee;
        }
        .card-number {
            font-weight: bold;
            color: #0066cc;
        }
        .card-category {
            background: #e3f2fd;
            padding: 4px 8px;
            border-radius: 4px;
            color: #1976d2;
        }
        .card-content {
            line-height: 1.6;
        }
        .card-content p {
            margin: 8px 0;
        }
        .label {
            font-weight: bold;
            color: #666;
        }
        .ais-Stats {
            text-align: right;
            margin-bottom: 20px;
            color: #666;
        }
        .no-results {
            text-align: center;
            padding: 40px;
            color: #666;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ›ï¸ í™”ì„±ì‹œ í˜„í™©ì¹´ë“œ ê²€ìƒ‰ ì‹œìŠ¤í…œ</h1>
        
        <div id="searchbox"></div>
        <div id="stats"></div>
        <div id="hits"></div>
        <div id="pagination"></div>
    </div>

    <script>
        const searchClient = algoliasearch(
            'X02D3JQ3LS',
            '66df50144b6ff51f5e49324905c350ae'
        );

        const search = instantsearch({
            indexName: 'hwaseong',  // ìƒˆë¡œ ë§Œë“  ì¸ë±ìŠ¤
            searchClient,
        });

        search.addWidgets([
            instantsearch.widgets.searchBox({
                container: '#searchbox',
                placeholder: 'ê²€ìƒ‰ì–´ ì…ë ¥ (ì˜ˆ: ê¹€ìƒê· , ë™íƒ„, ë³µì§€, ë„ë¡œ)',
                cssClasses: {
                    input: 'form-control',
                }
            }),
            
            instantsearch.widgets.stats({
                container: '#stats',
                templates: {
                    text: `
                        {{#hasNoResults}}ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤{{/hasNoResults}}
                        {{#hasOneResult}}1ê°œ í•­ëª© ë°œê²¬{{/hasOneResult}}
                        {{#hasManyResults}}ì´ {{#helpers.formatNumber}}{{nbHits}}{{/helpers.formatNumber}}ê°œ í•­ëª© ë°œê²¬ ({{processingTimeMS}}ms){{/hasManyResults}}
                    `,
                },
            }),
            
            instantsearch.widgets.hits({
                container: '#hits',
                templates: {
                    item(hit) {
                        // ë°ì´í„° í•„ë“œ ì•ˆì „í•˜ê²Œ ê°€ì ¸ì˜¤ê¸°
                        const cardNumber = hit.ì¹´ë“œë²ˆí˜¸ || hit['ì¹´ë“œë²ˆí˜¸'] || '-';
                        const category = hit.ë¶„ë¥˜ || hit['ë¶„ë¥˜'] || '-';
                        const region = hit.ì§€ì—­ || hit['ì§€ì—­'] || '-';
                        const title = hit.í˜„ì•ˆì œëª© || hit['í˜„ì•ˆì œëª©'] || '-';
                        const problem = hit.ë¬¸ì œì  || hit['ë¬¸ì œì '] || '-';
                        const suggestion = hit.ì œì•ˆë‚´ìš© || hit['ì œì•ˆë‚´ìš©'] || '-';
                        const department = hit.ë‹´ë‹¹ë¶€ì„œ || hit['ë‹´ë‹¹ë¶€ì„œ'] || '-';
                        
                        return `
                            <div class="card-header">
                                <span class="card-number">${cardNumber}</span>
                                <span class="card-category">${category}</span>
                            </div>
                            <div class="card-content">
                                <p><span class="label">ì§€ì—­:</span> ${region}</p>
                                <p><span class="label">í˜„ì•ˆì œëª©:</span> ${title}</p>
                                <p><span class="label">ë¬¸ì œì :</span> ${problem}</p>
                                <p><span class="label">ì œì•ˆë‚´ìš©:</span> ${suggestion}</p>
                                <p><span class="label">ë‹´ë‹¹ë¶€ì„œ:</span> ${department}</p>
                            </div>
                        `;
                    },
                    empty: `
                        <div class="no-results">
                            <p>ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.</p>
                            <p>ë‹¤ë¥¸ ê²€ìƒ‰ì–´ë¥¼ ì‹œë„í•´ë³´ì„¸ìš”.</p>
                        </div>
                    `,
                },
            }),
            
            instantsearch.widgets.pagination({
                container: '#pagination',
                cssClasses: {
                    list: 'pagination',
                    item: 'page-item',
                    link: 'page-link',
                }
            }),
        ]);

        search.start();
    </script>
</body>
</html>
